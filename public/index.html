<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZoeApp</title>
    <style>
        /* Your CSS styling */
    </style>

    <!-- Tambahkan Firebase SDK di sini -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js"></script>
    
    <!-- Script untuk menginisialisasi Firebase -->
    <script>
      // Konfigurasi Firebase kamu
      const firebaseConfig = {
        apiKey: "AIzaSyC2Gh0QTmawv5GXJR_EygmrYpxYLgwc4X8",
        authDomain: "zoeapp-fdf06.firebaseapp.com",
        databaseURL: "https://zoeapp-fdf06-default-rtdb.firebaseio.com",
        projectId: "zoeapp-fdf06",
        storageBucket: "zoeapp-fdf06.appspot.com",
        messagingSenderId: "302798178167",
        appId: "1:302798178167:web:14612f87faa0dd15934372"
      };

      // Inisialisasi Firebase
      const app = firebase.initializeApp(firebaseConfig);
      const database = firebase.database(app);

      // Function untuk mengambil data dari Firebase Realtime Database
      function fetchData() {
        const ref = database.ref('/');
        ref.on('value', (snapshot) => {
          const data = snapshot.val();
          console.log(data);  // Mengambil data dan menampilkannya di console
          displayData(data);  // Tampilkan data ke HTML
        });
      }

      // Function untuk menampilkan data ke HTML
      function displayData(data) {
        const tableBody = document.getElementById("data-table-body");
        tableBody.innerHTML = ""; // Clear existing data

        // Loop melalui semua bucket (misalnya, Kirai1, Kirai24, dll.)
        for (const bucketID in data) {
          const bucketData = data[bucketID];

          // Loop melalui setiap item dalam bucket
          for (const timestamp in bucketData) {
            const rowData = bucketData[timestamp];

            // Membuat baris baru untuk tabel
            const row = `<tr>
                          <td>${bucketID}</td>  <!-- ID Pohon -->
                          <td>${timestamp}</td> <!-- Tanggal (tahun, bulan, tanggal dan jam) -->
                          <td>${rowData.donatur || 'Tidak Ada'}</td>
                          <td>${rowData.tinggi || 'Tidak Ada'}</td>
                          <td><a href="${rowData.foto || '#'}" target="_blank">Lihat Gambar</a></td>
                        </tr>`;
            tableBody.innerHTML += row;  // Tambahkan baris ke tabel
          }
        }
      }

      // Panggil fetchData saat halaman dimuat
      window.onload = fetchData;
    </script>
</head>
<body>
    <header>
        <h1>Data Tanaman ZoeApp</h1>
    </header>

    <main>
        <h2>List Data Tanaman</h2>
        <table border="1">
            <thead>
                <tr>
                    <th>ID Pohon</th>
                    <th>Tanggal</th>
                    <th>Donatur</th>
                    <th>Tinggi</th>
                    <th>Foto</th>
                </tr>
            </thead>
            <tbody id="data-table-body">
                <!-- Data akan diisi di sini melalui JavaScript -->
            </tbody>
        </table>
    </main>

    <footer>
        <p>&copy; 2024 ZoeApp</p>
    </footer>
</body>
</html>
